// ========== ИНИЦИАЛИЗАЦИЯ ИГРЫ ==========
// Точка входа - запускается при загрузке страницы

function init() {
    // 1. Инициализация уровня (загружает данные текущего уровня)
    initLevel();
    
    // 2. Создание HTML-сетки пикселей
    initGrid();
    
    // 3. Привязка обработчиков к кнопкам улучшений
    setupUpgrades();
    
    // 4. Обработчик кликов по канвасу
    document.getElementById('pixel-canvas').addEventListener('click', handleClick);

    // 5. ИГРОВОЙ ЦИКЛ: Автоматическая добыча каждые 100мс (10 раз в секунду)
    setInterval(autoMine, 100);

    // 6. Автосохранение каждые 30 секунд
    setInterval(saveGame, 30000);

    // 7. Загрузка сохранения из localStorage (если есть)
    loadGame();

    // 8. Первое обновление UI
    updateUI();
}

// Запуск игры при загрузке страницы
init();
